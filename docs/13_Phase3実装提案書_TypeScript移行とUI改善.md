# Phase 3 å®Ÿè£…ææ¡ˆæ›¸: TypeScriptç§»è¡Œ + UIæ”¹å–„

**ä½œæˆæ—¥**: 2025å¹´10æœˆ2æ—¥  
**ä½œæˆè€…**: é–‹ç™ºãƒãƒ¼ãƒ   
**å¯¾è±¡**: PdM  
**Phase**: Phase 3 - TypeScriptç§»è¡Œ + ãƒ¢ãƒã‚¤ãƒ«UIæ”¹å–„ + Mastraçµ±åˆ

---

## ğŸ“Š ç¾çŠ¶åˆ†æ

### Phase 2 å®Œäº†çŠ¶æ³
- âœ… Gemini APIçµ±åˆï¼ˆStructured Outputæ–¹å¼ï¼‰
- âœ… ãƒãƒ£ãƒƒãƒˆUIï¼ˆå³å´å›ºå®šæ–¹å¼ï¼‰
- âœ… VRMã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
- âœ… åšå¤šå¼ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®Ÿè£…

### ç¢ºèªã•ã‚ŒãŸå•é¡Œç‚¹

#### 1. JavaScriptå®Ÿè£…ã®é™ç•Œ
**å•é¡Œ:**
- ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ãŒJavaScriptã§æ›¸ã‹ã‚Œã¦ã„ã‚‹
- å‹å®‰å…¨æ€§ãŒãªãã€ãƒã‚°ã®æ—©æœŸç™ºè¦‹ãŒå›°é›£
- Mastraãªã©ãƒ¢ãƒ€ãƒ³ãªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨çµ±åˆã§ããªã„
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã«æ¬ ã‘ã‚‹

**å½±éŸ¿:**
- å°†æ¥çš„ãªæ©Ÿèƒ½è¿½åŠ ï¼ˆRAGã€è¤‡é›‘ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰ãŒå›°é›£
- ã‚³ãƒ¼ãƒ‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãŒä½ã„
- ãƒãƒ¼ãƒ é–‹ç™ºæ™‚ã®å‹æƒ…å ±å…±æœ‰ãŒä¸å¯èƒ½

#### 2. ãƒ¢ãƒã‚¤ãƒ«UIã®å•é¡Œ
**å•é¡Œ:**
- å³å´å›ºå®šã®ãƒãƒ£ãƒƒãƒˆUIãŒã‚¹ãƒãƒ›ã§ç”»é¢ã‚’å æœ‰
- ARã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨VRMã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè¦‹ãˆã«ãã„
- ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæ¨ªç”»é¢ã§ã‚‚åŒæ§˜ã®å•é¡ŒãŒç™ºç”Ÿ

**å½±éŸ¿:**
- ãƒ¢ãƒã‚¤ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ãŒä½ä¸‹
- ARã®æ²¡å…¥æ„ŸãŒæãªã‚ã‚Œã‚‹
- ä¸»è¦ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‡ãƒã‚¤ã‚¹ï¼ˆã‚¹ãƒãƒ›ï¼‰ã§ã®åˆ©ç”¨ä½“é¨“ãŒæ‚ªã„

---

## ğŸ¯ Phase 3 ç›®æ¨™

### ä¸»è¦ç›®æ¨™
1. **TypeScriptåŒ–**: å…¨ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’TypeScriptã«ç§»è¡Œ
2. **Mastraçµ±åˆ**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®çµ±åˆ
3. **UIæ”¹å–„**: ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆæ–¹å¼ã¸ã®ç§»è¡Œ
4. **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–**: ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§ã®å¿«é©ãªåˆ©ç”¨

### å‰¯æ¬¡çš„ç›®æ¨™
- ã‚³ãƒ¼ãƒ‰ã®å‹å®‰å…¨æ€§å‘ä¸Š
- é–‹ç™ºä½“é¨“ï¼ˆDXï¼‰ã®æ”¹å–„
- å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µã¸ã®åŸºç›¤æ§‹ç¯‰
- ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç°¡ç´ åŒ–

---

## ğŸ“ æŠ€è¡“ææ¡ˆ

### 1. TypeScriptç§»è¡Œæˆ¦ç•¥

#### ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒæ§‹ç¯‰
```bash
# TypeScripté–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install --save-dev typescript @types/node @types/three
npm install --save-dev @types/aframe @types/express

# tsconfig.jsonä½œæˆ
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM"],
    "moduleResolution": "node",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules"]
}
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ®µéšçš„ç§»è¡Œ
1. **Week 1**: å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆ`.d.ts`ï¼‰
2. **Week 2**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç§»è¡Œï¼ˆ`server/`ï¼‰
3. **Week 3**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç§»è¡Œï¼ˆ`src/`ï¼‰
4. **Week 4**: ãƒ†ã‚¹ãƒˆã¨ãƒã‚°ä¿®æ­£

#### ç§»è¡Œãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ
**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:**
- `server/index.js` â†’ `server/index.ts`
- `server/google-calendar-integration.js` â†’ `server/services/gemini.service.ts`
- æ–°è¦: `server/types/chat.types.ts`
- æ–°è¦: `server/types/emotion.types.ts`

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:**
- `src/components/chat-ui.js` â†’ `src/components/ChatUI.ts`
- `src/components/vrm-animation-controller.js` â†’ `src/components/VRMAnimationController.ts`
- `src/controllers/chat-controller.js` â†’ `src/controllers/ChatController.ts`
- æ–°è¦: `src/types/vrm.types.ts`
- æ–°è¦: `src/types/chat.types.ts`

---

### 2. Mastraçµ±åˆ

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

```
ar-avatar-chat/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ mastra/
â”‚   â”‚   â”œâ”€â”€ index.ts           # Mastraã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â””â”€â”€ avatar-agent.ts    # VRMã‚¢ãƒã‚¿ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar.tool.ts   # Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
â”‚   â”‚   â”‚   â””â”€â”€ emotion.tool.ts    # æ„Ÿæƒ…æ¤œå‡º
â”‚   â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”‚   â””â”€â”€ conversation.workflow.ts
â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚       â””â”€â”€ memory.store.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ routes.ts
â”‚   â””â”€â”€ types/
â””â”€â”€ src/
    â””â”€â”€ (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)
```

#### Mastraå®Ÿè£…ä¾‹

**`server/mastra/agents/avatar-agent.ts`:**
```typescript
import { Agent } from '@mastra/core/agent';
import { Memory } from '@mastra/memory';
import { gemini } from '@ai-sdk/google';
import { calendarTool } from '../tools/calendar.tool';
import { emotionTool } from '../tools/emotion.tool';

export const avatarAgent = new Agent({
  name: 'VRM Avatar Agent',
  instructions: `
ã‚ãªãŸã¯åšå¤šå¼ã§è©±ã™VRoidã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ä¼šè©±ã—ã¦ãã ã•ã„ï¼š

ã€å£èª¿ãƒ«ãƒ¼ãƒ«ã€‘
- èªå°¾: ã€Œã€œã°ã„ã€ã€Œã€œã‚„ã‘ã‚“ã€ã€Œã€œã¨ï¼Ÿã€
- ä¸€äººç§°: ã€Œã†ã¡ã€
- æ€§æ ¼: æ˜ã‚‹ãã€è¦ªã—ã¿ã‚„ã™ã„

ã€æ„Ÿæƒ…è¡¨ç¾ã€‘
- neutral, happy, angry, sad, relaxed, surprised, thinking
ã®7ç¨®é¡ã®æ„Ÿæƒ…ã‚’é©åˆ‡ã«ä½¿ã„åˆ†ã‘ã¦ãã ã•ã„ã€‚
  `,
  model: gemini('gemini-2.5-flash'),
  tools: {
    calendarTool,
    emotionTool
  },
  memory: new Memory({
    storage: new LibSQLStore({
      url: 'file:./mastra.db',
    }),
  }),
});
```

**`server/mastra/tools/emotion.tool.ts`:**
```typescript
import { createTool } from '@mastra/core';
import { z } from 'zod';

export const emotionTool = createTool({
  id: 'detect-emotion',
  description: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰æ„Ÿæƒ…ã‚’æ¤œå‡ºã—ã¦VRMã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆ¶å¾¡',
  inputSchema: z.object({
    message: z.string().describe('å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'),
    context: z.string().optional().describe('ä¼šè©±ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ')
  }),
  outputSchema: z.object({
    emotion: z.enum(['neutral', 'happy', 'angry', 'sad', 'relaxed', 'surprised', 'thinking']),
    confidence: z.number().min(0).max(1)
  }),
  execute: async ({ context }) => {
    const { message, context: conversationContext } = context;
    
    // æ„Ÿæƒ…æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
    const emotion = detectEmotion(message, conversationContext);
    
    return {
      emotion,
      confidence: 0.85
    };
  }
});
```

#### Mastraã®åˆ©ç‚¹
1. **å‹å®‰å…¨ãªçµ±åˆ**: TypeScriptãƒ™ãƒ¼ã‚¹ã§è‡ªå‹•è£œå®Œã¨ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
2. **ãƒ¡ãƒ¢ãƒªãƒ¼ç®¡ç†**: ä¼šè©±å±¥æ­´ã‚’è‡ªå‹•ä¿å­˜ãƒ»å–å¾—
3. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: è¤‡é›‘ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡¦ç†ã‚’ã‚°ãƒ©ãƒ•ã§ç®¡ç†
4. **è¦³æ¸¬æ€§**: OpenTelemetryã§å…¨å‡¦ç†ã‚’ãƒˆãƒ¬ãƒ¼ã‚¹
5. **è©•ä¾¡**: LLMå‡ºåŠ›ã®å“è³ªã‚’è‡ªå‹•è©•ä¾¡
6. **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercel/Cloudflare Workersã«ç°¡å˜ãƒ‡ãƒ—ãƒ­ã‚¤

---

### 3. ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆUIè¨­è¨ˆ

#### ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚   AR View + VRM Avatar  â”‚
â”‚                         â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â† ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ«
â”‚  ğŸ’¬ ç›´è¿‘ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  User: ã“ã‚“ã«ã¡ã¯        â”‚
â”‚  Bot: ã“ã‚“ã«ã¡ã¯ï¼ã°ã„   â”‚  â† ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ
â”‚                         â”‚   ï¼ˆå±•é–‹/æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ï¼‰
â”‚  [ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„]  [é€ä¿¡] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®Ÿè£…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**`src/components/BottomSheet.ts`:**
```typescript
export class BottomSheet {
  private container: HTMLElement;
  private messagesContainer: HTMLElement;
  private inputContainer: HTMLElement;
  private dragHandle: HTMLElement;
  
  private isExpanded: boolean = false;
  private startY: number = 0;
  private currentY: number = 0;
  
  // å±•é–‹ãƒ¬ãƒ™ãƒ«
  private readonly COLLAPSED_HEIGHT = 120; // æœ€å°åŒ–ï¼ˆå…¥åŠ›æ¬„ã®ã¿ï¼‰
  private readonly PEEK_HEIGHT = 240;      // 2ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  private readonly EXPANDED_HEIGHT = 480;  // å…¨ç”»é¢ã®60%
  
  constructor() {
    this.createBottomSheet();
    this.attachDragListeners();
    this.attachSwipeGestures();
  }
  
  private createBottomSheet(): void {
    const html = `
      <div id="bottom-sheet" class="bottom-sheet">
        <div class="drag-handle"></div>
        <div class="messages-preview">
          <!-- ç›´è¿‘2ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿è¡¨ç¤º -->
        </div>
        <div class="input-container">
          <input type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." />
          <button class="send-button">é€ä¿¡</button>
        </div>
      </div>
    `;
    document.body.insertAdjacentHTML('beforeend', html);
    
    this.container = document.getElementById('bottom-sheet')!;
    this.dragHandle = this.container.querySelector('.drag-handle')!;
    this.messagesContainer = this.container.querySelector('.messages-preview')!;
    this.inputContainer = this.container.querySelector('.input-container')!;
  }
  
  private attachDragListeners(): void {
    this.dragHandle.addEventListener('touchstart', this.onDragStart.bind(this));
    this.dragHandle.addEventListener('touchmove', this.onDragMove.bind(this));
    this.dragHandle.addEventListener('touchend', this.onDragEnd.bind(this));
  }
  
  private onDragStart(e: TouchEvent): void {
    this.startY = e.touches[0].clientY;
  }
  
  private onDragMove(e: TouchEvent): void {
    this.currentY = e.touches[0].clientY;
    const deltaY = this.startY - this.currentY;
    
    // ãƒ‰ãƒ©ãƒƒã‚°ã«å¿œã˜ã¦é«˜ã•ã‚’èª¿æ•´
    const newHeight = Math.max(
      this.COLLAPSED_HEIGHT,
      Math.min(this.EXPANDED_HEIGHT, this.container.offsetHeight + deltaY)
    );
    
    this.container.style.height = `${newHeight}px`;
  }
  
  private onDragEnd(): void {
    const currentHeight = this.container.offsetHeight;
    
    // ã‚¹ãƒŠãƒƒãƒ—ãƒã‚¤ãƒ³ãƒˆã‚’æ±ºå®š
    if (currentHeight < this.PEEK_HEIGHT) {
      this.collapse();
    } else if (currentHeight < this.EXPANDED_HEIGHT * 0.7) {
      this.peek();
    } else {
      this.expand();
    }
  }
  
  public collapse(): void {
    this.container.style.height = `${this.COLLAPSED_HEIGHT}px`;
    this.messagesContainer.style.display = 'none';
    this.isExpanded = false;
  }
  
  public peek(): void {
    this.container.style.height = `${this.PEEK_HEIGHT}px`;
    this.messagesContainer.style.display = 'block';
    this.displayRecentMessages(2);
    this.isExpanded = false;
  }
  
  public expand(): void {
    this.container.style.height = `${this.EXPANDED_HEIGHT}px`;
    this.messagesContainer.style.display = 'block';
    this.displayRecentMessages(10);
    this.isExpanded = true;
  }
  
  private displayRecentMessages(count: number): void {
    // ç›´è¿‘ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿è¡¨ç¤º
    const messages = this.getRecentMessages(count);
    this.messagesContainer.innerHTML = messages
      .map(msg => this.createMessageBubble(msg))
      .join('');
  }
}
```

**`src/styles/bottom-sheet.css`:**
```css
.bottom-sheet {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px 20px 0 0;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
  transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1000;
  
  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æŠ˜ã‚ŠãŸãŸã¿çŠ¶æ…‹ */
  height: 120px;
}

.drag-handle {
  width: 40px;
  height: 4px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 2px;
  margin: 12px auto;
  cursor: grab;
}

.drag-handle:active {
  cursor: grabbing;
}

.messages-preview {
  padding: 0 16px;
  overflow-y: auto;
  max-height: 300px;
  
  /* ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
  -webkit-overflow-scrolling: touch;
}

.input-container {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 16px;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px 20px 0 0;
  display: flex;
  gap: 8px;
}

.input-container input {
  flex: 1;
  padding: 12px 16px;
  border: none;
  border-radius: 24px;
  background: rgba(255, 255, 255, 0.9);
  font-size: 16px;
}

.send-button {
  padding: 12px 24px;
  border: none;
  border-radius: 24px;
  background: #667eea;
  color: white;
  font-weight: 600;
  cursor: pointer;
}

/* ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– */
@media (max-width: 768px) {
  .bottom-sheet {
    /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§ã‚‚åŒã˜å‹•ä½œ */
  }
}

/* æ¨ªç”»é¢å¯¾å¿œ */
@media (orientation: landscape) and (max-height: 600px) {
  .bottom-sheet {
    /* æ¨ªç”»é¢æ™‚ã¯æ§ãˆã‚ã« */
    height: 80px;
  }
  
  .messages-preview {
    max-height: 200px;
  }
}
```

#### UIæ”¹å–„ã®ãƒã‚¤ãƒ³ãƒˆ
1. **èƒŒæ™¯ã®å¯è¦–æ€§**: ARã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨VRMãŒå¸¸ã«è¦‹ãˆã‚‹
2. **æ®µéšçš„å±•é–‹**: æŠ˜ã‚ŠãŸãŸã¿ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ å…¨ç”»é¢ã®3æ®µéš
3. **ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼**: ãƒ‰ãƒ©ãƒƒã‚°&ã‚¹ãƒ¯ã‚¤ãƒ—ã§ç›´æ„Ÿçš„æ“ä½œ
4. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»æ¨ªç”»é¢ã«å¯¾å¿œ
5. **æœ€å°åŒ–æ™‚**: å…¥åŠ›æ¬„ã®ã¿è¡¨ç¤ºã§ARã«é›†ä¸­å¯èƒ½

---

## ğŸ“… å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1: TypeScriptç’°å¢ƒæ§‹ç¯‰
- [ ] Day 1-2: TypeScriptè¨­å®šã€å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] Day 3-4: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å‹å®šç¾©
- [ ] Day 5-7: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‹å®šç¾©ã€ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰

### Week 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç§»è¡Œ
- [ ] Day 1-3: `server/index.ts` ç§»è¡Œ
- [ ] Day 4-5: `gemini.service.ts` ç§»è¡Œ
- [ ] Day 6-7: Mastraã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€åŸºæœ¬ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…

### Week 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç§»è¡Œ + UIæ”¹å–„
- [ ] Day 1-2: ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] Day 3-4: ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®TypeScriptç§»è¡Œ
- [ ] Day 5-6: VRMã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®TypeScriptç§»è¡Œ
- [ ] Day 7: çµ±åˆãƒ†ã‚¹ãƒˆ

### Week 4: Mastraçµ±åˆ + æœ€çµ‚èª¿æ•´
- [ ] Day 1-2: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«å®Ÿè£…ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€æ„Ÿæƒ…ï¼‰
- [ ] Day 3-4: ãƒ¡ãƒ¢ãƒªãƒ¼ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ
- [ ] Day 5-6: ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] Day 7: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã€å®Œäº†å ±å‘Š

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### 1. å‹å®‰å…¨æ€§ãƒ†ã‚¹ãƒˆ
- TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—
- ESLintã«ã‚ˆã‚‹é™çš„è§£æ
- å‹æ¨è«–ã®æ­£ç¢ºæ€§ç¢ºèª

### 2. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡ã€æ„Ÿæƒ…æ¤œå‡º
- **VRMã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: 7ç¨®é¡ã®æ„Ÿæƒ…åˆ¥ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **Mastraã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã€ãƒ¡ãƒ¢ãƒªãƒ¼ä¿å­˜
- **ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ**: å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ã€ã‚¹ãƒ¯ã‚¤ãƒ—æ“ä½œ

### 3. ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ
- **iOS**: Safari 18+ (iPhone 13ä»¥é™)
- **Android**: Chrome 120+ (Pixel 6ä»¥é™)
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ**: iPad Pro, Galaxy Tab
- **æ¨ªç”»é¢**: ã™ã¹ã¦ã®ãƒ‡ãƒã‚¤ã‚¹

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚é–“: <3ç§’
- ãƒãƒ£ãƒƒãƒˆå¿œç­”æ™‚é–“: <2ç§’
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é·ç§»: 60fpsç¶­æŒ

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### æŠ€è¡“æŒ‡æ¨™
- [ ] TypeScriptåŒ–ç‡: 100%
- [ ] å‹ã‚¨ãƒ©ãƒ¼: 0ä»¶
- [ ] ãƒ“ãƒ«ãƒ‰æ™‚é–“: <30ç§’
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º: <500KB (gzip)

### UXæŒ‡æ¨™
- [ ] ãƒ¢ãƒã‚¤ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢: 90+ç‚¹
- [ ] ã‚¿ã‚¹ã‚¯å®Œäº†ç‡: 95%ä»¥ä¸Š
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦: 4.5/5ä»¥ä¸Š
- [ ] ãƒãƒ£ãƒƒãƒˆå…¥åŠ›é€Ÿåº¦: å¾“æ¥æ¯”30%å‘ä¸Š

### é–‹ç™ºæŒ‡æ¨™
- [ ] ã‚³ãƒ¼ãƒ‰è¡Œæ•°: 30%å‰Šæ¸›ï¼ˆå‹æ¨è«–ã«ã‚ˆã‚‹ï¼‰
- [ ] ãƒã‚°ç™ºç”Ÿç‡: 50%å‰Šæ¸›ï¼ˆå‹å®‰å…¨æ€§ã«ã‚ˆã‚‹ï¼‰
- [ ] é–‹ç™ºé€Ÿåº¦: 40%å‘ä¸Šï¼ˆMastraçµ±åˆã«ã‚ˆã‚‹ï¼‰

---

## ğŸ’° ãƒªã‚½ãƒ¼ã‚¹è¦‹ç©ã‚‚ã‚Š

### é–‹ç™ºå·¥æ•°
- TypeScriptç§»è¡Œ: 1.5é€±é–“ï¼ˆ1äººï¼‰
- Mastraçµ±åˆ: 1é€±é–“ï¼ˆ1äººï¼‰
- UIæ”¹å–„: 1.5é€±é–“ï¼ˆ1äººï¼‰
- ãƒ†ã‚¹ãƒˆ: 1é€±é–“ï¼ˆ1äººï¼‰

**åˆè¨ˆ**: ç´„4é€±é–“ï¼ˆ1äººï¼‰

### å¤–éƒ¨ã‚³ã‚¹ãƒˆ
- Mastra: ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ï¼ˆç„¡æ–™ï¼‰
- TypeScript: ç„¡æ–™
- è¿½åŠ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: Â¥0

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
- Vercel Preview Deployments
- å„PRä½œæˆæ™‚ã«è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- HTTPSå¯¾å¿œï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆå¿…é ˆï¼‰

### ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒ
- Vercel Production
- ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
- CDNæœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼ˆSentryç­‰ï¼‰

---

## ğŸ“ ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

### ãƒªã‚¹ã‚¯1: TypeScriptç§»è¡Œã«ã‚ˆã‚‹ãƒã‚°
**å½±éŸ¿**: é«˜  
**å¯¾ç­–**: 
- æ®µéšçš„ç§»è¡Œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ï¼‰
- æ—¢å­˜æ©Ÿèƒ½ã®ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
- å‹å®šç¾©ã®æ®µéšçš„å¼·åŒ–

### ãƒªã‚¹ã‚¯2: Mastraå­¦ç¿’ã‚³ã‚¹ãƒˆ
**å½±éŸ¿**: ä¸­  
**å¯¾ç­–**:
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ´»ç”¨
- ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰é–‹å§‹
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚µãƒãƒ¼ãƒˆæ´»ç”¨

### ãƒªã‚¹ã‚¯3: UIãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹
**å½±éŸ¿**: ä¸­  
**å¯¾ç­–**:
- React Three Fiberæ¤œè¨ï¼ˆå°†æ¥ï¼‰
- ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè£…
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºæ•°åˆ¶é™

### ãƒªã‚¹ã‚¯4: ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§
**å½±éŸ¿**: é«˜  
**å¯¾ç­–**:
- è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã§ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
- ãƒãƒªãƒ•ã‚£ãƒ«è¿½åŠ 
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯UIæº–å‚™

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Phase 3å®Œäº†å¾Œ
1. **Phase 4**: éŸ³å£°ä¼šè©±ï¼ˆTTS + STTï¼‰
2. **Phase 5**: ãƒªãƒƒãƒ—ã‚·ãƒ³ã‚¯å®Ÿè£…
3. **Phase 6**: RAGçµ±åˆï¼ˆç¤¾å†…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢ï¼‰
4. **Phase 7**: ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å¯¾å¿œï¼ˆç”»åƒãƒ»å‹•ç”»å…¥åŠ›ï¼‰

### é•·æœŸãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
- AI Pipelinesã¨ã®çµ±åˆ
- ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘æ©Ÿèƒ½è¿½åŠ 
- è¤‡æ•°è¨€èªå¯¾å¿œï¼ˆè‹±èªã€ä¸­å›½èªç­‰ï¼‰
- VRMä»¥å¤–ã®ã‚¢ãƒã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾å¿œ

---

## ğŸ’¬ æ‰¿èªä¾é ¼

ä»¥ä¸‹ã®å†…å®¹ã«ã¤ã„ã¦ã€PdMã®æ‰¿èªã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼š

1. **Phase 3é–‹å§‹ã®æ‰¿èª**
2. **TypeScriptç§»è¡Œæˆ¦ç•¥ã®æ‰¿èª**
3. **Mastraçµ±åˆã®æ‰¿èª**
4. **ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆUIè¨­è¨ˆã®æ‰¿èª**
5. **4é€±é–“ã®é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ‰¿èª**

æ‰¿èªã„ãŸã ã‘ã‚Œã°ã€ç›´ã¡ã«å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã€‚

---

**å ±å‘Šæ—¥**: 2025å¹´10æœˆ2æ—¥  
**é–‹ç™ºãƒãƒ¼ãƒ **: Claude Code + å¯ºç”°æ§˜
