# 調査依頼書 #002
## Gemini 2.5 Flash 実装検証タスク

**発行日**: 2025-10-01  
**発行者**: PdM 寺田康佑  
**対象**: リサーチャーチーム  
**期限**: 1営業日（2025-10-02）  
**優先度**: 中（Phase 1と並行）

---

## 📌 背景

技術選定の最終決定により、Phase 2のLLM統合には**Google Gemini 2.5 Flash**を採用します。

調査依頼書 #001で指摘された懸念点：
> 「Function Callingにおける日本語のニュアンス対応や、広範な商用実装実績に関する公開検証データがまだ不足している」

この懸念を払拭し、開発チームが安心して実装できるよう、**実際に動作確認済みの実装ガイド**を作成することが本タスクの目的です。

---

## 🎯 調査目的

1. Gemini 2.5 FlashのFunction Calling（日本語環境）の実動作を確認
2. Google Calendar連携の実装コード例を作成
3. 応答品質・速度のベンチマーク実施
4. 開発チームへの実装ガイド作成

---

## 📋 調査項目

### 1. Function Calling動作確認（最重要）

#### テストシナリオ
以下の日本語プロンプトで、Function Callingが正しく動作することを確認してください：

**シナリオA: Google Calendar連携**
```
ユーザー: 「明日の予定を教えて」
期待動作: Geminiが get_calendar_events 関数を呼び出す指示を出す
```

**シナリオB: Web検索**
```
ユーザー: 「最新のAR技術トレンドは？」
期待動作: Geminiが web_search 関数を呼び出す指示を出す
```

**シナリオC: 複合タスク**
```
ユーザー: 「今週の会議を確認して、その内容を調べて」
期待動作: Calendar → Web検索の連続実行
```

#### 確認ポイント
- [ ] Function Callingの指示が正しく返される
- [ ] 日本語プロンプトでの認識精度
- [ ] 関数パラメータの抽出精度（日時、キーワード等）
- [ ] VRoidキャラクター的な口調指定が可能か（システムプロンプト）

---

### 2. Google Calendar連携の実装コード例

#### 必要な成果物
以下の**動作確認済み**のコードを作成してください：

1. **クライアントサイド（JavaScript/Fetch）**
   - プロキシサーバーへのリクエスト例

2. **サーバーサイド（Node.js/Gemini API）**
   - Gemini 2.5 FlashのAPI呼び出し
   - Function Callingの処理フロー
   - Google Calendar APIの実行（OAuth認証含む）
   - 結果をGeminiに再投入して最終応答生成

3. **環境変数・認証設定**
   - Gemini APIキーの管理方法
   - Google Calendar API認証（OAuth 2.0）のセットアップ手順

#### コード要件
- **実際に動作する**ことを確認済みであること
- コメント（日本語OK）で各ステップを説明
- エラーハンドリングを含む

---

### 3. ベンチマークテスト

#### 測定項目
以下の指標を**10回実行して平均値**を算出してください：

| 測定項目 | 目標値 | 測定方法 |
|---------|--------|---------|
| **応答時間（Function Calling含む）** | <2秒 | リクエスト送信 → 最終応答受信までの時間 |
| **トークン生成速度** | >500 tokens/s | Gemini APIのレスポンスから算出 |
| **日本語応答の自然さ** | 主観評価 | VRoidキャラ風の口調が維持されているか |

#### テスト環境
- **ネットワーク**: 安定した環境（オフィスWi-Fi等）
- **プロンプト**: 同一内容で10回実行
- **時間帯**: 平日の異なる時間帯で分散実行

---

### 4. 懸念点のリストアップ（あれば）

以下の観点で、実装時に注意すべき点をリストアップしてください：

- [ ] Function Callingの挙動で不安定な点
- [ ] 日本語ニュアンスの誤解釈事例
- [ ] エラー発生時の挙動
- [ ] レート制限に関する注意点
- [ ] GPT-4o miniと比較して劣る点（あれば）

---

## 📦 成果物

### 1. **実装ガイド**（Markdown）
タイトル: `Gemini_2.5_Flash_実装ガイド.md`

**構成**:
```markdown
# Gemini 2.5 Flash 実装ガイド

## 1. 概要
## 2. セットアップ手順
   - APIキー取得
   - Google Calendar API認証
   - 環境変数設定
## 3. 実装コード例
   - クライアントサイド
   - サーバーサイド（Node.js）
   - Function Calling処理フロー
## 4. テスト結果
   - ベンチマーク結果
   - 日本語応答例
## 5. 注意点・ベストプラクティス
## 6. トラブルシューティング
```

### 2. **動作確認済みコードサンプル**
- `client-example.js` - クライアント側のコード
- `proxy-server.js` - プロキシサーバーのコード
- `google-calendar-integration.js` - Calendar連携の実装

### 3. **ベンチマーク結果**（Excel or CSV）
- 10回の測定データ
- 平均値・標準偏差
- グラフ（オプション）

### 4. **懸念点リスト**（Markdown）
- 実装時の注意事項
- GPT-4o miniとの比較表

---

## ⏰ 期限・報告

- **期限**: 2025-10-02（1営業日）
- **報告方法**: Slack + Googleドライブ共有
- **中間報告**: 不要（1日タスクのため）

---

## 📞 問い合わせ

**PdM 寺田**
- 質問・相談: Slack @terada
- 対応時間: 平日 9:00-18:00

---

## 📌 備考

### 優先順位
1. **Function Calling動作確認**（最重要）
2. **実装コード例**（最重要）
3. ベンチマークテスト
4. 懸念点リスト

時間が限られている場合は、1と2を優先してください。

### 参考資料
- 調査依頼書 #001の成果物（Part III実装コード参照）
- Gemini API公式ドキュメント: https://ai.google.dev/gemini-api/docs/function-calling
- Google Calendar API: https://developers.google.com/calendar/api/guides/overview

---

よろしくお願いします！🚀
